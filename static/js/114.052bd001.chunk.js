"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[114],{8114:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var r=t(5861),a=t(885),c=t(7757),s=t.n(c),o=t(6140),i=t(4903),u=t(5705),l=t(2791),d=t(1089),m={},f=t(184),h=d.Ry().shape({name:d.Z_().required("enter a name, this is a required field"),number:d.Z_().min(8).max(13).required("enter a phone number, this is a required field")}),x=function(e){var n=e.initialValues,t=void 0===n?{name:"",number:""}:n,a=e.onSubmit,c=e.buttonText,d=(0,l.useId)(),x=(0,i.wY)().data,b=function(){var e=(0,r.Z)(s().mark((function e(n,t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.resetForm,!x.find((function(e){return e.name.toLocaleLowerCase()===n.name.toLocaleLowerCase()}))){e.next=4;break}return o.ZP.error("".concat(n.name," is already in contacts")),e.abrupt("return");case 4:return e.next=6,a(n);case 6:r();case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,f.jsx)(u.J9,{initialValues:t,onSubmit:b,validationSchema:h,children:(0,f.jsxs)(u.l0,{className:m.form,autoComplete:"off",children:[(0,f.jsx)("label",{htmlFor:"".concat(d,"-name"),className:m.label,children:"Name"}),(0,f.jsx)(u.gN,{className:m.input,type:"text",name:"name",id:"".concat(d,"-name")}),(0,f.jsx)(u.Bc,{className:m.error,name:"name",component:"div"}),(0,f.jsx)("label",{htmlFor:"".concat(d,"-number"),className:m.label,children:"Number"}),(0,f.jsx)(u.gN,{className:m.input,type:"tel",name:"number",id:"".concat(d,"-number")}),(0,f.jsx)(u.Bc,{className:m.error,name:"number",component:"div"}),(0,f.jsx)("button",{className:m.button,type:"submit",children:c})]})})},b=function(){var e=(0,i.Tn)(),n=(0,a.Z)(e,1)[0],t=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:o.ZP.success('contact "'.concat(t.name,'" was saved')),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o.ZP.error("error, contact was not saved"),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(x,{onSubmit:t,buttonText:"Add contact"})})},p=t(5048),v=t(1413),j=t(4164),w=t(6856),N="Modal_Overlay__yoxbg",k="Modal_Modal__I1UYJ",_="Modal_btnClose__oHdcJ",y="Modal_icon__2UpwH",g=function(e){var n=e.onClose,t=e.id,c=(0,i.wY)().data,u=(0,i.wv)(),d=(0,a.Z)(u,2),m=d[0],h=d[1],b=c.find((function(e){return e.id===t}));(0,l.useEffect)((function(){return window.addEventListener("keydown",p),function(){window.removeEventListener("keydown",p)}}));var p=function(e){"Escape"===e.code&&n()},g=function(){var e=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m((0,v.Z)({id:b.id},t));case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){h.isSuccess&&o.ZP.success("changes was saved")}),[h.isSuccess]),(0,j.createPortal)((0,f.jsx)("div",{className:N,onClick:function(e){e.currentTarget===e.target&&n()},children:(0,f.jsxs)("div",{className:k,children:[c&&(0,f.jsx)("button",{onClick:n,type:"button",className:_,children:(0,f.jsx)(w.FU5,{className:y})}),c&&(0,f.jsx)(x,{initialValues:{name:b.name,number:b.number},onSubmit:g,buttonText:"Save"})]})}),document.querySelector("#modal-root"))},C={},Z=function(e){var n=e.id,t=e.name,r=e.number,c=(0,i.Nt)(),s=(0,a.Z)(c,2),u=s[0],d=s[1],m=(0,l.useState)(!1),h=(0,a.Z)(m,2),x=h[0],b=h[1],p=function(){b(!x)};return(0,l.useEffect)((function(){d.isSuccess&&o.ZP.success("contact was deleted")}),[d.isSuccess]),(0,f.jsxs)("li",{className:C.item,children:[t,": ",r,(0,f.jsxs)("div",{className:C.btnGroup,children:[(0,f.jsx)("button",{className:C.button,type:"button",onClick:function(){return u(n)},disabled:d.isLoading,children:"Delete"}),(0,f.jsx)("button",{className:C.button,onClick:p,children:"Update"})]}),x&&(0,f.jsx)(g,{onClose:p,id:n})]})},L={},S=function(){var e=(0,i.wY)(),n=e.data,t=e.isFetching,r=(0,p.v9)((function(e){return e.filter})),a=null===n||void 0===n?void 0:n.filter((function(e){return e.name.toLocaleLowerCase().includes(r.toLocaleLowerCase())}));return(0,f.jsxs)(f.Fragment,{children:[n?t:(0,f.jsx)("p",{className:L.loading,children:"Loading..."}),(0,f.jsx)("ul",{children:n&&a.map((function(e){var n=e.id,t=e.name,r=e.number;return(0,f.jsx)(Z,{id:n,name:t,number:r},n)}))})]})},F=t(4808),P={},E=function(){var e=(0,l.useId)(),n=(0,p.v9)((function(e){return e.filter})),t=(0,p.I0)();return(0,f.jsxs)("div",{className:P.filter,children:[(0,f.jsx)("label",{htmlFor:"".concat(e,"-filter"),className:P.label,children:"Find contacts by name"}),(0,f.jsx)("input",{className:P.input,type:"search",id:"".concat(e,"-filter"),value:n,onChange:function(e){return t((0,F.M)(e.currentTarget.value))}})]})};function M(){return(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{children:"Phonebook"}),(0,f.jsx)(b,{}),(0,f.jsx)("h2",{children:"Contacts"}),(0,f.jsx)(E,{}),(0,f.jsx)(S,{})]})}}}]);
//# sourceMappingURL=114.052bd001.chunk.js.map